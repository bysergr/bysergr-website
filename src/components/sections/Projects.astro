---
import ProjectItem from "@/components/widgets/ProjectItem.astro";
import getSortedProjects from "@/utils/getSortedProjects";
import { getCollection } from "astro:content";
import { SITE } from "@/config";

const projects = await getCollection("projects");
const sortedProjects = getSortedProjects(projects);
---

<section class="flex flex-col gap-8">
  <h2 class="text-xl font-semibold">MY PROJECTS!</h2>
  <div class="grid grid-cols-[repeat(auto-fill,minmax(250px,1fr))] gap-6">
    {
      sortedProjects.map(
        ({ data, slug }, index) =>
          index < SITE.projectsIndexPage && <ProjectItem project={data} />
      )
    }
  </div>
</section>
